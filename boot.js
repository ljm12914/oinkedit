(()=>{let e=setInterval((()=>{console.log("Try to limit"),function(){if("oeMeta"in window){if(oeMeta.dev&&oeMeta.isPreVersion){const e=oeMeta.timeLimit,o=`Oinkedit v${oeMeta.version} 测试版\r\n评估时间限制：${e}s\r\n警告！本网站的 Oinkedit 仍处于测试预览版本，请勿用于真正写作，否则数据可能损坏或丢失！`;console.log(o),alert(o);const t=document.createElement("div");t.style="position:fixed;bottom:.2rem;left:.2rem;z-index:999999;user-select:none;",t.textContent=o,document.body.append(t),setTimeout((()=>{const e=document.createElement("div");e.textContent="已到达评估限时，5 秒后将关闭页面……",document.getElementById(oeRoot).replaceWith(e),setTimeout((()=>{close(),history.go(-1),location.href="//ljm.im"}),5e3)}),1e3*e)}return!0}return!1}()&&clearInterval(e)}),500),o=setInterval((()=>{console.log("Try to sw"),function(){if("oeMeta"in window){const e=navigator.userAgent.toLowerCase();return"serviceWorker"in navigator?e.includes("electron")||e.includes("oe-desktop")?console.log("桌面版，跳过SW注册"):oeMeta.skipSW?console.log("开发模式，跳过SW注册"):navigator.serviceWorker.register("serviceworker.js"):alert("由于浏览器兼容性问题或未使用 https 访问，无法注册离线化组件，这意味着 Oinkedit 将无法离线运行。\r\n建议使用现代浏览器如 Google Chrome、Microsoft Edge 或 Firefox。\r\nScripts that enable offline experience cannot be registered due to browser compatibility issues, which means Oinkedit cannot run while offline.\r\nConsider using Google Chrome, Microsoft Edge or Firefox browser."),!0}return!1}()&&clearInterval(o)}),500)})();